# Session Log: Track Reorganization

## Summary
Reorganized entire codebase to follow the track structure with `darwin_v0` as the track name. Also cleaned up misplaced files and outdated references.

## Tasks Completed

### Major: Track Structure Reorganization
- Moved all Python source code from `src/` to `src/darwin_v0/` (except `utils.py` which stays as cross-track utility)
- Moved all configs from `configs/run/` and `configs/world/` to `configs/darwin_v0/run/` and `configs/darwin_v0/world/`
- Moved all bash scripts from `scripts/` to `scripts/darwin_v0/`
- Moved all data outputs from `data/` to `data/darwin_v0/`
- Created `docs/tracks/darwin_v0/notes.md` for track documentation

### Import Updates
- Updated all Python imports from `from src.X` to `from src.darwin_v0.X`
- Kept `from src.utils` unchanged (cross-track utility)
- Updated `sys.path.insert()` in scripts to add extra `.parent` for deeper nesting

### Config Updates
- Updated `output_dir` in all run configs: `data/X` → `data/darwin_v0/X`
- Updated `world_config` paths: `configs/world/` → `configs/darwin_v0/world/`
- Updated `checkpoint_path` in all transfer configs
- Updated all 74 copied config.yaml files in data/ outputs

### Cleanup
- Fixed outdated checkpoint references in `bridge.yaml` and `maze.yaml` (pointed to non-existent `run_default_archived`, now point to `run_default`)
- Moved Python analysis scripts from `scripts/darwin_v0/divergent_genotype_v1/` to `scratch/divergent_genotype_v1_analysis/`
- Moved `divergent_genotype_v4` output from `data/` to `scratch/v4_analysis/output/` (was generated by scratch analysis, not a tracked experiment)
- Consolidated `genotype_clusters_v1` reference data into `scratch/genotype_analysis_v1/` (removed duplicate subdirectory)
- Updated all paths referencing the moved cluster data

## Files Modified/Created

### Created
- `src/darwin_v0/__init__.py`
- `docs/tracks/darwin_v0/notes.md`
- `docs/logs/2026-01-13/1807_track_reorganization.md`

### Moved (major directories)
- `src/*.py` → `src/darwin_v0/`
- `src/worlds/` → `src/darwin_v0/worlds/`
- `src/scripts/` → `src/darwin_v0/scripts/`
- `configs/run/` → `configs/darwin_v0/run/`
- `configs/world/` → `configs/darwin_v0/world/`
- `scripts/*.sh` → `scripts/darwin_v0/`
- `data/*` → `data/darwin_v0/`

### Cleanup moves
- `scripts/darwin_v0/divergent_genotype_v1/*.py` → `scratch/divergent_genotype_v1_analysis/`
- `data/darwin_v0/divergent_genotype_v4/` → `scratch/v4_analysis/output/`
- `data/darwin_v0/reference/` → `scratch/genotype_analysis_v1/` (consolidated)

## Key Decisions
- `src/utils.py` stays at root level as cross-track utility with stable API
- Analysis outputs from scratch scripts should live in `scratch/*/output/`, not in `data/`
- Reference data generated by scratch analysis should stay with the generating script

## Next Steps
- Update `docs/structure.md` to reflect new track-based organization
- Consider consolidating the many diffusion config variants if no longer needed
